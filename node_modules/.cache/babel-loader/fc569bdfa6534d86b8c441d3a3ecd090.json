{"remainingRequest":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/babel-loader/lib/index.js!/Users/air-jackson/Desktop/school_admin_front_end/node_modules/eslint-loader/index.js??ref--13-0!/Users/air-jackson/Desktop/school_admin_front_end/src/utils/http.js","dependencies":[{"path":"/Users/air-jackson/Desktop/school_admin_front_end/src/utils/http.js","mtime":1578030955801},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _es6Promise = require(\"es6-promise\");\n\nvar _elementUi = require(\"element-ui\");\n\n_axios.default.defaults.timeout = 30000; // 1分钟\n\n_axios.default.defaults.baseURL = '';\n\n_axios.default.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  // change method for get\n\n  /* if(process.env.NODE_ENV == 'development'){\n      config['method'] = 'GET';\n      console.log(config)\n  }*/\n  if (config['MSG']) {// Vue.prototype.$showLoading(config['MSG']);\n  } else {} // Vue.prototype.$showLoading();\n    // if(user.state.token){//用户登录时每次请求将token放入请求头中\n    //   config.headers[\"token\"] = user.state.token;\n    // }\n\n\n  if (config['Content-Type'] === 'application/x-www-form-urlencoded;') {\n    // 默认发application/json请求，如果application/x-www-form-urlencoded;需要使用transformRequest对参数进行处理\n\n    /* config['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';*/\n    config.headers['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n\n    config['transformRequest'] = function (obj) {\n      var str = [];\n\n      for (var p in obj) {\n        str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\n      }\n\n      return str.join('&');\n    };\n  } // config.header['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  // Vue.$vux.loading.hide()\n  return _es6Promise.Promise.reject(error);\n});\n\n_axios.default.interceptors.response.use(function (response) {\n  // Vue.$vux.loading.hide();\n  return response.data;\n}, function (error) {\n  // Vue.$vux.loading.hide();\n  if (error.response) {\n    switch (error.response.status) {\n      case 404:\n        (0, _elementUi.Message)({\n          message: '' || 'Error',\n          type: 'error',\n          duration: 5 * 1000\n        });\n        break;\n\n      default:\n        (0, _elementUi.Message)({\n          message: '' || 'Error',\n          type: 'error',\n          duration: 5 * 1000\n        });\n    }\n  } else if (error instanceof Error) {\n    console.error(error);\n  } else {\n    (0, _elementUi.Message)({\n      message: '' || 'Error',\n      type: 'error',\n      duration: 5 * 1000\n    });\n  }\n\n  return _es6Promise.Promise.reject(error.response);\n});\n\nvar _default = _vue.default.prototype.$http = _axios.default;\n\nexports.default = _default;",null]}