{"remainingRequest":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/air-jackson/Desktop/school_admin_front_end/src/views/teacher/editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/air-jackson/Desktop/school_admin_front_end/src/views/teacher/editor.vue","mtime":1578030955808},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/air-jackson/Desktop/school_admin_front_end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'TeacherEditor',\n  computed: {\n    ...mapGetters([\n      'name'\n    ])\n  },\n  data() {\n    return {\n      schools: [],\n      academys: [],\n      options: [\n      ],\n      apiModel: 'teacher',\n      form: {}\n    }\n  },\n\n  mounted() {\n    if (this.$route.query._id) {\n      this.$http.post('/api/' + this.apiModel + '/get', { _id: this.$route.query._id }).then(res => {\n        if (res && res.length > 0) {\n          this.form = res[0]\n          this.schoolChange(this.form.school)\n        }\n      })\n    }\n\n    // 显示学校选择栏目\n    this.$http.post('/api/school/find').then(res => {\n      if (res && res.length > 0) {\n        this.schools = res\n        console.log('res:', res)\n      }\n    })\n  },\n  methods: {\n    onSubmit() {\n      if (this.form._id) {\n        this.$http.post(`/api/${this.apiModel}/update`, this.form).then(res => {\n          console.log('bar:', res)\n          this.$router.push({ path: this.apiModel })\n          this.form = {}\n        })\n      } else {\n        this.$http.post('/api/' + this.apiModel + '/add', this.form).then(res => {\n          console.log('bar:', res)\n          this.$router.push({ path: this.apiModel })\n          this.form = {}\n        })\n      }\n    },\n    schoolChange(val1) {\n      // 显示学院选择栏目\n      this.$http.post('/api/academy/get', { school: val1 }).then(res => {\n        if (res && res.length > 0) {\n          this.academys = res\n          console.log('res:', res)\n        }\n      })\n    }\n  }\n}\n",null]}